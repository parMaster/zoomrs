<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Watch Meeting</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>

	<script type="text/javascript">
		var base_url = window.location.origin;
		// Get the accesKey from the URL
		var params = window.location.pathname.split("/")
		var accessKey = params.pop();
		console.log(accessKey);

		// Get the uuid from the URL
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		const uuid = urlParams.get('uuid');
		console.log(uuid);

		// Get the meeting details from the server
		// /watchMeeting/<accessKey>?uuid=<uuid>
		$.ajax({
			url: base_url + "/watchMeeting/" + accessKey + "?uuid="+uuid,
			type: "GET",
			dataType: "json",
			success: function(data) {
				// If the meeting is not found, redirect to the home page
				if (data["status"] == "error") {
					window.location.href = base_url;
				}
				// If the meeting is found, show the meeting details
				else {
					// Set the meeting topic
					$("#meetingTopic").text(data["topic"]);
					// Set the meeting id
					$("#meetingId").text(data["id"]);
				}
			}
		});


	</script>

	
</body>
